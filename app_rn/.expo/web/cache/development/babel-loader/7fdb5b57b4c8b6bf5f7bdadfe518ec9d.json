{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useState } from \"react\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport View from \"react-native-web/dist/exports/View\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport RefreshControl from \"react-native-web/dist/exports/RefreshControl\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport Title from \"../assets/title\";\nimport axios from 'axios';\nimport Toast from 'react-native-toast-message';\nimport logoBoth from \"../../img/logoBoth.png\";\nimport { vw, vh, vmin, vmax } from 'react-native-expo-viewport-units';\n\nvar wait = function wait(timeout) {\n  return new Promise(function (resolve) {\n    return setTimeout(resolve, timeout);\n  });\n};\n\nvar NewsLetter = function NewsLetter() {\n  var _useState = useState('none'),\n      _useState2 = _slicedToArray(_useState, 2),\n      loading = _useState2[0],\n      setLoading = _useState2[1];\n\n  var _React$useState = React.useState(false),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      refreshing = _React$useState2[0],\n      setRefreshing = _React$useState2[1];\n\n  var _useState3 = useState(''),\n      _useState4 = _slicedToArray(_useState3, 2),\n      email = _useState4[0],\n      setEmail = _useState4[1];\n\n  var _useState5 = useState(''),\n      _useState6 = _slicedToArray(_useState5, 2),\n      name = _useState6[0],\n      setName = _useState6[1];\n\n  var _useState7 = useState(''),\n      _useState8 = _slicedToArray(_useState7, 2),\n      errEmail = _useState8[0],\n      setErrEmail = _useState8[1];\n\n  var _useState9 = useState(''),\n      _useState10 = _slicedToArray(_useState9, 2),\n      errName = _useState10[0],\n      setErrName = _useState10[1];\n\n  var onRefresh = React.useCallback(function () {\n    setRefreshing(true);\n    wait(1000).then(function () {\n      setRefreshing(false);\n      setErrEmail('');\n      setErrName('');\n      setEmail('');\n      setName('');\n    });\n  }, []);\n  var url_api = 'https://jsonplaceholder.typicode.com/todos/1';\n  var regex = /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\\.[a-zA-Z0-9-])/;\n\n  var addUser = function addUser() {\n    var err;\n    return _regeneratorRuntime.async(function addUser$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            setLoading('');\n            setErrEmail('');\n            setErrName('');\n            err = 0;\n\n            if (email === '') {\n              setErrEmail('Champ vide');\n              err = 1;\n            } else if (!email.match(regex)) {\n              setErrEmail('Email non valide');\n              err = 1;\n            }\n\n            if (name === '') {\n              setErrName('Champ vide');\n              err = 1;\n            }\n\n            if (!(err != 0)) {\n              _context.next = 11;\n              break;\n            }\n\n            Toast.show({\n              type: 'error',\n              text1: 'Erreur formulaire'\n            });\n            setLoading('none');\n            _context.next = 15;\n            break;\n\n          case 11:\n            _context.next = 13;\n            return _regeneratorRuntime.awrap(axios({\n              method: 'POST',\n              url: 'https://www.adrien-meynard.fr/dessin/contact/',\n              data: 'mail=' + email + '&name=' + name + '&token=oifdARGPOR5F'\n            }));\n\n          case 13:\n            _context.next = 15;\n            return _regeneratorRuntime.awrap(axios({\n              method: 'GET',\n              url: url_api\n            }).then(function (response) {\n              setEmail('');\n              setName('');\n              Toast.show({\n                type: 'success',\n                text1: 'Vous êtes maintenant inscrit'\n              });\n            }).catch(function (err) {\n              Toast.show({\n                type: 'error',\n                text1: 'Erreur formulaire'\n              });\n            }));\n\n          case 15:\n            setLoading('none');\n\n          case 16:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  return React.createElement(SafeAreaView, {\n    style: styles.container\n  }, React.createElement(ScrollView, {\n    contentContainerStyle: styles.global,\n    refreshControl: React.createElement(RefreshControl, {\n      refreshing: refreshing,\n      onRefresh: onRefresh\n    })\n  }, React.createElement(Title, {\n    texte: \"Subscription\"\n  }), React.createElement(Text, {\n    style: styles.text\n  }, \"Email\"), React.createElement(TextInput, {\n    style: styles.input,\n    onChangeText: function onChangeText(e) {\n      return setEmail(e);\n    },\n    value: email,\n    placeholder: \"email\",\n    keyboardType: \"default\"\n  }), React.createElement(Text, {\n    style: [styles.btnMargin, styles.err]\n  }, errEmail), React.createElement(Text, {\n    style: styles.text\n  }, \"FirstName\"), React.createElement(TextInput, {\n    style: styles.input,\n    onChangeText: function onChangeText(e) {\n      return setName(e);\n    },\n    value: name,\n    placeholder: \"firstname\",\n    keyboardType: \"default\"\n  }), React.createElement(Text, {\n    style: [styles.btnMargin, styles.err, styles.btnMarginTwo]\n  }, errName), React.createElement(TouchableOpacity, {\n    style: styles.btn,\n    onPress: addUser\n  }, React.createElement(Text, {\n    style: styles.textBtn\n  }, \"Subscribe\")), React.createElement(Image, {\n    source: logoBoth,\n    style: styles.logoBoth\n  }), React.createElement(Toast, null), React.createElement(View, {\n    style: [styles.loading, {\n      display: loading\n    }]\n  }, React.createElement(ActivityIndicator, {\n    size: \"large\",\n    color: \"black\"\n  }))));\n};\n\nvar styles = StyleSheet.create({\n  loading: {\n    backgroundColor: 'gray',\n    width: vw(100),\n    height: vh(100),\n    display: 'flex',\n    justifyContent: 'center',\n    position: 'absolute',\n    opacity: 0.8,\n    top: -150,\n    left: -20,\n    zIndex: 999999\n  },\n  none: {\n    display: 'none'\n  },\n  container: {\n    flex: 1\n  },\n  global: {\n    margin: 20,\n    flex: 1,\n    justifyContent: 'flex-start'\n  },\n  input: {\n    marginTop: 8,\n    marginBottom: 3,\n    width: 100 + '%',\n    borderRadius: 10,\n    paddingLeft: 15,\n    paddingTop: 10,\n    paddingBottom: 10,\n    borderWidth: 2,\n    borderColor: 'gray',\n    fontSize: 18\n  },\n  btn: {\n    backgroundColor: 'green',\n    padding: 10,\n    width: 100 + '%',\n    borderRadius: 5,\n    marginBottom: 5\n  },\n  textBtn: {\n    color: 'white',\n    fontSize: 20,\n    textAlign: 'center'\n  },\n  text: {\n    fontSize: 20,\n    marginTop: 10\n  },\n  logoBoth: {\n    marginTop: 50,\n    marginLeft: 100\n  },\n  btnMargin: _objectSpread({\n    marginBottom: 5\n  }, Platform.select({\n    ios: {\n      marginBottom: 5\n    }\n  })),\n  btnMarginTwo: _objectSpread({\n    marginBottom: 25\n  }, Platform.select({\n    ios: {\n      marginBottom: 35\n    }\n  })),\n  btnMarginTop: {\n    marginTop: 3\n  },\n  err: _objectSpread({\n    fontSize: 15,\n    color: 'red',\n    height: 18\n  }, Platform.select({\n    ios: {\n      height: 18\n    }\n  }))\n});\nexport default NewsLetter;","map":{"version":3,"sources":["C:/wamp64/www/expo_copie/AwesomeProject/components/NewsLetter/index.js"],"names":["React","useState","Title","axios","Toast","logoBoth","vw","vh","vmin","vmax","wait","timeout","Promise","resolve","setTimeout","NewsLetter","loading","setLoading","refreshing","setRefreshing","email","setEmail","name","setName","errEmail","setErrEmail","errName","setErrName","onRefresh","useCallback","then","url_api","regex","addUser","err","match","show","type","text1","method","url","data","response","catch","styles","container","global","text","input","e","btnMargin","btnMarginTwo","btn","textBtn","display","StyleSheet","create","backgroundColor","width","height","justifyContent","position","opacity","top","left","zIndex","none","flex","margin","marginTop","marginBottom","borderRadius","paddingLeft","paddingTop","paddingBottom","borderWidth","borderColor","fontSize","padding","color","textAlign","marginLeft","Platform","select","ios","btnMarginTop"],"mappings":"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","sourcesContent":["import React, {useState} from \"react\";\nimport { ActivityIndicator, Text, StyleSheet, View, TextInput, TouchableOpacity,Platform, Image, RefreshControl, SafeAreaView, ScrollView } from \"react-native\";\nimport Title from \"../assets/title\";\nimport axios from 'axios';\nimport Toast from 'react-native-toast-message'\nimport logoBoth from '../../img/logoBoth.png'\nimport { vw, vh, vmin, vmax } from 'react-native-expo-viewport-units';\n\nconst wait = (timeout) => {\n  return new Promise(resolve => setTimeout(resolve, timeout));\n}\n\nconst NewsLetter = () => {\n  \n  const [loading, setLoading] = useState('none')\n\n  const [refreshing, setRefreshing] = React.useState(false);\n  const [email, setEmail] = useState('')\n  const [name, setName] = useState('')\n\n  const [errEmail, setErrEmail] = useState('')\n  const [errName, setErrName] = useState('')\n\n  const onRefresh = React.useCallback(() => {\n    setRefreshing(true);\n\n    wait(1000).then(() => {\n      setRefreshing(false)\n      setErrEmail('')\n      setErrName('')\n      setEmail('')\n      setName('')\n    })\n  }, []);\n\n  let url_api = 'https://jsonplaceholder.typicode.com/todos/1'\n  const regex =  /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\\.[a-zA-Z0-9-])/;\n  const addUser = async() => {\n    setLoading('')\n    setErrEmail('')\n    setErrName('')\n\n    let err = 0\n    if(email === '') {\n      setErrEmail('Champ vide')\n      err = 1\n\n    } else if(!email.match(regex)){\n      setErrEmail('Email non valide')\n      err = 1\n    }\n\n    if(name === '') {\n      setErrName('Champ vide')\n      err = 1\n    }\n\n    if(err != 0) {\n      Toast.show({\n        type: 'error',\n        text1: 'Erreur formulaire',\n      });\n      setLoading('none')\n\n  } else {\n      await axios({\n        method: 'POST',\n        url:'https://www.adrien-meynard.fr/dessin/contact/',\n        data: 'mail='+email+'&name='+name+'&token=oifdARGPOR5F',\n      })\n\n      await axios({\n        method: 'GET',\n        url: url_api,\n        // data:{param1:'PARAMETRE API ICI'}\n      })\n      .then((response) => {\n        setEmail('')\n        setName('')\n        Toast.show({\n          type: 'success',\n          text1: 'Vous êtes maintenant inscrit',\n        });\n      })\n      .catch((err) => {\n        Toast.show({\n          type: 'error',\n          text1: 'Erreur formulaire',\n        });\n      })\n    }\n    setLoading('none')\n  }\n    return (\n      <SafeAreaView style={styles.container}>\n      <ScrollView\n        contentContainerStyle={styles.global}\n        refreshControl={\n          <RefreshControl\n            refreshing={refreshing}\n            onRefresh={onRefresh}\n          />\n        }>\n        <Title texte=\"Subscription\" />\n          <Text style={styles.text}>Email</Text>\n          <TextInput\n            style={styles.input}\n            onChangeText={(e) => setEmail(e)}\n            value={email}\n            placeholder=\"email\"\n            keyboardType=\"default\"\n          />\n          <Text style={[styles.btnMargin, styles.err]}>{errEmail}</Text>\n          <Text style={styles.text}>FirstName</Text>\n          <TextInput\n            style={styles.input}\n            onChangeText={(e) => setName(e)}\n            value={name}\n            placeholder=\"firstname\"\n            keyboardType=\"default\"\n          />   \n          <Text style={[styles.btnMargin, styles.err, styles.btnMarginTwo]}>{errName}</Text>\n\n          <TouchableOpacity\n            style={styles.btn}\n            onPress={addUser}\n          >\n            <Text style={styles.textBtn}>Subscribe</Text>\n          </TouchableOpacity>\n          <Image source={logoBoth} style={styles.logoBoth} />          \n          <Toast /> \n          <View style={[styles.loading, {display:loading}]}>\n            <ActivityIndicator size=\"large\" color=\"black\" />\n          </View>\n        </ScrollView>\n    </SafeAreaView>\n    )\n}\n\nconst styles = StyleSheet.create({\n\n  loading: {\n    backgroundColor:'gray',\n    width:vw(100),\n    height:vh(100),\n    display:'flex',\n    justifyContent:'center',\n    position:'absolute',\n    opacity:0.8,\n    top:-150,\n    left:-20,\n    zIndex:999999\n  },\n\n  none: {\n    display:'none'\n  },\n\n  container: {\n    flex: 1,\n  },\n    global: {\n    margin:20,\n    flex:1,\n    justifyContent:'flex-start',\n  },\n  input: {\n    marginTop:8,\n    marginBottom:3,\n    width: 100+'%',\n    borderRadius: 10,\n    paddingLeft:15,\n    paddingTop:10,\n    paddingBottom:10,\n    borderWidth:2,\n    borderColor:'gray',\n    fontSize:18,\n  },\n\n  btn: {\n    backgroundColor:'green',\n    padding:10,\n    width:100+'%',\n    borderRadius: 5,\n    marginBottom:5\n  },\n\n  textBtn: {\n    color:'white',\n    fontSize:20,\n    textAlign:'center',\n  },\n  \n  text: {\n    fontSize:20,\n    marginTop:10\n  },\n\n  logoBoth: {\n    marginTop:50,\n    marginLeft:100\n  },\n  \n  btnMargin: {\n    marginBottom:5,\n    ...Platform.select({\n      ios: {\n        marginBottom:5,\n      }\n    })\n  },\n\n  btnMarginTwo: {\n        marginBottom:25,\n    ...Platform.select({\n      ios: {\n        marginBottom:35,\n      }\n    })\n  },\n  \n  btnMarginTop: {\n    marginTop:3\n  },\n\n  err: {\n    fontSize:15,\n    color:'red',\n    height:18,\n    ...Platform.select({\n      ios: {\n        height:18\n      }\n    })\n  },\n})\n  \nexport default NewsLetter"]},"metadata":{},"sourceType":"module"}